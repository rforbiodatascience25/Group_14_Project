---
title: "02_clean"
format: html
editor: visual
self-contained: true
---

## Load Libraries

We start by loading the relevant libraries.

```{r}
#| message: false
library("tidyverse")
library("ggridges")
```

## Load Data

The two different datasets are loaded into the document and saved as data1 and data2. When viewing the two files, we see that they both contain ReefID_Name as the first column. This column is untidy since we have two different informations in one cell.

```{r}
#| message: false
data1 <- read_csv("../data/_raw/reef_data_dataset1.csv")
data2 <- read_csv("../data/_raw/reef_data_dataset2.csv")
```

## Data Wrangling

Starting out with the data wrangling, we want to first combine the two datasets using the join function and combining them by their common column.

```{r}
#| message: false
#| warning: false
reef_combined_untidy <- data1 |>
  left_join(data2, by = "ReefID_Name")

write_csv(reef_combined_untidy, "../data/_raw/reef_data_combined_untidy.csv")
```

Now we want to tidy the dataset, and turn ReefID_Name into two separate variables. For this we use the seperate function and split them by "\|".

```{r}
reef_combined_tidy <- reef_combined_untidy |>
  separate(
    col  = "ReefID_Name",
    into = c("Reef.ID", "Reef.Name"),
    sep  = " \\| "
  ) |>
  relocate(Reef.ID, Reef.Name, .before = 1)

write_csv(reef_combined_tidy, "../data/_raw/reef_data_combined_tidy.csv")
```

We want to check if the variable Ocean has any NA values. For this we can use the function count.

```{r}
reef_combined_tidy |>
  count(Ocean)
```

We want to remove all the observations where Ocean has NA values and we can see that 57 observations has NA values. For this we can use drop_na to remove them from the dataset.

```{r}
reef_clean <-
  reef_combined_tidy |>
  drop_na(Ocean)
```

## 
